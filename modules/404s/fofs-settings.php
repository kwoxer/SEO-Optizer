<?php
/**
 * 404 Monitor Settings Module
 * 
 * @since 2.1
 */

if (class_exists('SO_Module')) {

class SO_FofsSettings extends SO_Module {
	
	function get_parent_module() { return 'fofs'; }
	function get_child_order() { return 20; }
	function is_independent_module() { return false; }
	
	function get_module_title() { return __('404 Monitor Settings', 'seo-optimization'); }
	function get_module_subtitle() { return __('Settings', 'seo-optimization'); }
	function get_settings_key() { return '404s'; }
	
	function get_default_settings() {
		return array(
			  'exceptions' => "*/favicon.ico\n*/apple-touch-icon.png\n*/pingserver.php\n*/xmlrpc.php"
			, 'max_log_size' => 100
			, 'log_enabled' => $this->flush_setting('log_hits', true, 'settings')
			, 'restrict_logging' => true
			, 'log_spiders' => true
			, 'log_errors_with_referers' => true
		);
	}
	
	function init() {
		add_filter('so_get_setting-404s-max_log_size', array('sostr', 'to_int'));
	}
	
	function admin_page_contents() {
		$this->admin_form_start();
		$this->checkbox('log_enabled', __('Continue monitoring for new 404 errors', 'seo-optimization'), __('Monitoring Settings', 'seo-optimization'));
		$this->checkboxes(array(
			  'restrict_logging' => __('Only log these types of 404 errors:', 'seo-optimization')
			, 'log_spiders' => array('description' => __('404s generated by search engine spiders', 'seo-optimization'), 'indent' => true)
			, 'log_errors_with_referers' => array('description' => __('404s with referring URLs', 'seo-optimization'), 'indent' => true)
		), __('Log Restrictions', 'seo-optimization'));
		$this->textbox('max_log_size', __('Maximum Log Entries', 'seo-optimization'), $this->get_default_setting('max_log_size'));
		$this->textarea('exceptions', __('URLs to Ignore', 'seo-optimization') . '<br /><small><em>' . __('(Use * as wildcard)', 'seo-optimization') . '</em></small>', 15);
		$this->admin_form_end();
	}
}

}
?>